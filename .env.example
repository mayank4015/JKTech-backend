# =============================================================================
# JKTech Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env files to version control!

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Server Configuration
PORT=8080
FRONTEND_URL=http://localhost:3000
NODE_ENV=development

# Logging Configuration
TRACE_DOMAIN=https://your-domain.com
LOGS_DIR=./logs

# Database Configuration (REQUIRED)
# Replace with your actual PostgreSQL connection strings
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/your_database?schema=public&connect_timeout=10&pool_timeout=30&pool_max=10&pool_min=2"
DIRECT_URL="postgresql://postgres:your_password@localhost:5432/your_database?schema=public"

# JWT Configuration (REQUIRED)
# Generate a strong secret: openssl rand -base64 64
# In production, use a secret with at least 64 characters
JWT_SECRET=your_super_secure_jwt_secret_key_at_least_32_characters_long_for_production
JWT_EXPIRES_IN=1h
REFRESH_TOKEN_EXPIRES_IN=7d

# Supabase Configuration (REQUIRED)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Database Connection Tuning
DB_MAX_RETRIES=3
DB_RETRY_DELAY=1000
DB_MAX_RETRY_DELAY=10000
DB_CONNECTION_TIMEOUT=30000

# Rate Limiting Configuration
THROTTLE_TTL=60
THROTTLE_LIMIT=10

# Input Sanitization Configuration
SANITIZE_HTML=true
SANITIZE_ALLOWLIST=b,i,strong,em,u,br,p,ul,ol,li,a
REDACT_FIELDS=password,passwordHash,refreshToken,otp,accessToken,hash
MONGO_PROTECTION=true

# OAuth Configuration (Optional - for Google OAuth)
GOOGLE_OAUTH_REDIRECT_URL=http://localhost:3000/auth/callback

# S3 Configuration (Optional - for file uploads via Supabase Storage)
S3_BUCKET_NAME=your-s3-bucket-name
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=your_s3_access_key
S3_SECRET_ACCESS_KEY=your_s3_secret_key
S3_ENDPOINT=https://your-project.supabase.co/storage/v1/s3

# Redis Configuration (Optional - for token blacklisting)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=100
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000
REDIS_TLS=false

# Processing Service Configuration (Microservices)
PROCESSING_SERVICE_URL=http://localhost:8001
PROCESSING_SERVICE_TOKEN=processing-service-token
SERVICE_TOKEN=processing-service-token

# =============================================================================
# PRODUCTION NOTES
# =============================================================================
# When deploying to production:
# 1. Set NODE_ENV=production
# 2. Use HTTPS URLs for FRONTEND_URL
# 3. Generate a strong JWT_SECRET (64+ characters)
# 4. Use secure database credentials
# 5. Enable proper SSL/TLS for database connections
# 6. Review and adjust rate limiting settings
# =============================================================================